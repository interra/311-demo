{
    "title": "Philly 311 Data Visualized",
    "backend": "cartodb",
    "dataResources": [
        {
            "resourceHandle": "philly_311",
            "resourceType": "cartodb",
            "url": "https://phl.carto.com/api/v2/sql",
            "query": "?q=SELECT service_name, COUNT(cartodb_id) FROM public_cases_fc WHERE service_name NOT IN ('Information Request') GROUP BY service_name ORDER BY count DESC LIMIT 10"
        }
    ],
    "regions": [
        {
            "id": "filters",
            "className": "col-md-6",
            "children": [
                {
                    "type": "NeighborhoodFilter",
                    "filterKey": "neighborhood",
                    "multi": true,
                    "className": "map-left",
                    "willFilter": ["philly_311"]
                }
            ]
        },
        {
            "id": "region-1",
            "className": "col-md-6",
            "children": [
                {
                    "type": "Chart",
                    "componentKey": "chart-3",
                    "dataType": "NVD3PieChartSeries",
                    "resourceHandle": "philly_311",
                    "count": "service_name",
                    "limit": 10,
                    "where": [
                        {
                            "op": "notIn",
                            "attribute": "service_name",
                            "value": ["Information Request"]
                        }
                    ],
                    "x": "service_name",
                    "y": "count",
                    "settings": {
                        "type": "pieChart",
                        "rotateLabels": 45,
                        "height": 700,
                        "legend": {
                            "maxKeyLength": 1500
                        }
                    }
                }
	    ]
        },
        {
            "id": "region-3",
            "className": "row",
            "children": [
                {
                    "type": "Chart",
                    "componentKey": "chart-4",
                    "className": "col-md-6",
                    "header": "Status of Requests",
                    "dataType": "NVD3PieChartSeries",
                    "resourceHandle": "philly_311",
                    "count": "status",
                    "limit": 10,
                    "x": "status",
                    "y": "count",
                    "settings": {
                        "type": "pieChart",
                        "rotateLabels": 45,
                        "height": 300,
                        "color": ["#e05138", "#42f477"],
                        "legend": {
                            "maxKeyLength": 1500
                        }
                    }
                },
                {
                    "type": "Chart",
                    "componentKey": "chart-4a",
                    "dataType": "NVD3PieChartSeries",
                    "className": "col-md-6",
                    "header": "Status of Requests",
                    "resourceHandle": "philly_311",
                    "count": "status",
                    "limit": 10,
                    "x": "status",
                    "y": "count",
                    "settings": {
                        "type": "pieChart",
                        "rotateLabels": 45,
                        "height": 300,
                        "color": ["#e05138", "#42f477"],
                        "legend": {
                            "maxKeyLength": 1500
                        }
                    }
                }
            ]
        }
   ]
}
